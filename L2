
const uint servoPin = 0;

void setupServo() {
    gpio_set_function(servoPin, GPIO_FUNC_PWM);
    uint slice_num = pwm_gpio_to_slice_num(servoPin);
    pwm_set_wrap(slice_num, 20000);
    pwm_set_chan_level(slice_num, PWM_CHAN_A, 1000);
    pwm_set_enabled(slice_num, true);
}

void setServoAngle(int angle) 
    uint slice_num = pwm_gpio_to_slice_num(servoPin);
    pwm_set_chan_level(slice_num, PWM_CHAN_A, angle);
}

int main() {
    setupServo();

    while (true) {
        int angle = /* Чтение угла из потенциометра или другого источника */;
        setServoAngle(angle);
    }

    return 0;
}
