
#include <SPI.h>
#include <AmperkaFET.h>

// Объекты для управления FET-ами
AmperkaFET pFET(10); // Пин для P-FET, подключенный к D10
AmperkaFET nFET(9);  // Пин для N-FET, подключенный к D9

void setup() {
  Serial.begin(9600);
  SPI.begin(); // Инициализация шины SPI

  // Инициализация FET-ов
  pFET.begin();
  nFET.begin();
}

void loop() {
  if (Serial.available() > 0) {
    char command = Serial.read();
    
    if (command == 'P' || command == 'p') {
      pFET.on();
      Serial.println("P-FET is turned on.");
    } else if (command == 'N' || command == 'n') {
      nFET.on();
      Serial.println("N-FET is turned on.");
    } else if (command == 'O' || command == 'o') {
      pFET.off();
      nFET.off();
      Serial.println("Both FETs are turned off.");
    } else {
      Serial.println("Invalid command. Enter 'P', 'N', or 'O'.");
    }
  }
}
